<div [formGroup]="form" *ngIf="this.model">
    <input type="hidden" formControlName="mediaInfoId">
    <div class="col-md-10">
        <small *ngIf="submitted && form.controls.tabs.hasError('minlength')" class="active-warning center">
            Please add at least one tab.
        </small>
        <div class="clearfix"></div>

        <div formArrayName="tabs"class="col-md-7">
            <h5>
                Tabs
            </h5>
            <div class="tab-container">
                <div class="tab-list-container">
                    <a *ngFor="let tab of form.controls.tabs.controls; let i=index" [class.active]="currentTab===i" (click)="displayTab(i)" class="tab-menu-item tab-num">{{i+1}}</a>
                    <a (click)="addTab();" class="tab-menu-item" *ngIf="form.controls.tabs.controls.length < 3"><i class="material-icons">add</i></a>
                </div>

                <div *ngFor="let tab of form.controls.tabs.controls; let i=index">
                    <div [class.hidden]="currentTab!=i">
                        <div [formGroupName]="i">
                            <input type="hidden" formControlName="id">
                            <input type="hidden" formControlName="masterId">
                            <input type="hidden" formControlName="order">
                            <input type="hidden" formControlName="enabled">
                            <input type="hidden" formControlName="published">
                            <input type="hidden" formControlName="mediaTabbedTextFeedtabId">
                            <input type="hidden" formControlName="title">
                            <div class="input-field">
                                <editor [form]="tab" [formSubmitted]="submitted"
                                        [elementId]="'tabs-' + i + '-bodyText'"
                                        [formControlId]="'bodyText'"
                                        [label]="'Body text'"
                                        [validationMessage]="'Body text is required.'"></editor>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="col-md-10 remove-tab-container">
                            <hr/>
                            <a (click)="removeTab(i)" [class.disabled]="form.controls.tabs.controls.length <= 1" class="btn">Delete Tab</a>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <div class="col-md-5">
            <upload (mediaUploaded)="attachMedia($event)" [title]="'Upload an image or video'" [selectedMedia]="model.mediaInfo" [previewText]="'Media Preview'"></upload>
            <small class="active-warning" [class.hidden]="form.controls.mediaInfoId.valid || !submitted">
                Please upload an image or video.
            </small>

        </div>
    </div>
</div>