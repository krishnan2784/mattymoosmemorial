<div *ngIf="model">
    <div class="report-title">
        <img src="assets/images/Icon-{{feedTypeString}}-b.png" class="feed-cat-img" *ngIf="model.feedType!=feedTypes.Observation" />
        <img src="assets/images/Icon-Observation-b.png" class="feed-cat-img" *ngIf="model.feedType==feedTypes.Observation" />

        <span class="item-title">{{model.title}}</span>
    </div>
    <div class="report-subtitle">
        <p>{{feedTypeString}} stats</p>
    </div>
    <div>
        <div class="col-md-6 stat-container">
            <div class="header-border"></div>
            <div class="stat-block">
                <div class="stat-title">
                    <div class="col-md-4 total-learners">
                        <h5 *ngIf="summaryData">
                            {{summaryData.submitted}}
                        </h5>
                        <p>Total learners</p>
                        <div class="clearboth"></div>
                    </div>
                    <i class="material-icons right">person</i> 
                </div>
                <div class="stat-body" *ngIf="passRatioData">
                    <gaugechart [chartData]="passRatioData" [id]="'passRatioChart'"></gaugechart>
                    <h5 *ngIf="summaryData">
                        <b>{{summaryData.submitted}} <span>submitted / </span></b>
                        {{summaryData.passed}} <span> passed</span>
                    </h5>
                </div>
            </div>
        </div>
        <div class="col-md-3 stat-container">
            <div class="header-border"></div>
            <div class="stat-block">
                <div class="stat-title">
                    <h5>
                        Average Score
                    </h5>
                </div>
                <div class="stat-body" *ngIf="averageScoreData">
                    <donutchart [chartData]="averageScoreData" [id]="'averageScoreChart'"></donutchart>
                </div>
            </div>
        </div>
        <div class="col-md-3 stat-container">
            <div class="header-border"></div>
            <div class="stat-block">
                <div class="stat-title">
                    <h5>
                        Average Time
                    </h5>
                </div>
                <div class="stat-body" *ngIf="averageTimeData">
                    <barchart [chartData]="averageTimeData" [id]="'averageTimeChart'"></barchart>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
    <div>
        <div class="col-md-3 right">
            <input placeholder="Search" type="search" [(ngModel)]="searchString"/>
        </div>
        <div class="clearfix"></div>
    </div>
    <div>
        <div class="col-md-2 filter-col">
            <div class="filter-container">
                <div class="filter-header filter-block">
                    <p>Refine by: <a class="right" (click)="clearFilters()">Clear all</a></p>
                </div>
                <div class="filter-block">
                    <p>Role <a class="right" (click)="clearUserFilters()">Clear</a></p>
                    <div *ngFor="let userGroup of this.userGroupFilters">
                        <input type="checkbox" id="{{userGroup.id}}" [(ngModel)]="userGroup.checked" ><label [attr.for]="userGroup.id">{{userGroup.text}}</label>
                    </div>
                </div>
                <div class="filter-block">
                    <p>Dealership <a class="right" (click)="clearDealerFilters()">Clear</a></p>
                    <div class="filter-block">
                        <div *ngFor="let dealer of this.dealershipFilters">
                            <input type="checkbox" id="{{dealer.id}}" [(ngModel)]="dealer.checked"><label [attr.for]="dealer.id">{{dealer.text}}</label>
                        </div>
                    </div>
                </div>
                <div class="filter-block">
                    <p>Range <a class="right" (click)="resetRange()">Reset</a></p>
                    <div id="scoreRange"></div>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="col-md-10">
            <div class="result-list">
                <div class="result-list-header">
                    <div class="col-md-4 header">
                        <div>
                            Users
                        </div>
                    </div>
                    <div class="col-md-2">
                        Role
                    </div>
                    <div class="col-md-3">
                        Dealership
                    </div>
                    <div class="col-md-3">
                        <span class="center">
                            Status
                        </span>
                    </div>
                </div>
                
                <div *ngIf="!filteredListData"><em>Loading...</em></div>
                <div *ngIf="filteredListData && filteredListData.length === 0">No results have been found for the selected filters.</div>
                <div *ngIf="filteredListData && filteredListData.length > 0" class="result-list-content">
                    <div *ngFor="let quizResult of filteredListData | paginate: {itemsPerPage: 20, currentPage:page, id: '1'}" class="result-list-content-row">
                        <div class="col-md-1">
                            <i class="material-icons person-icon">person</i>
                        </div>
                        <div class="col-md-3 border-bottom">
                            {{quizResult.user.firstName}} {{quizResult.user.lastName}}
                        </div>
                        <div class="col-md-2 border-bottom">
                            {{ quizResult.mainUserGroup }}
                        </div>
                        <div class="col-md-3 border-bottom">
                            {{ quizResult.dealershipName }}
                        </div>
                        <div class="col-md-2 border-bottom">
                            <i class="material-icons" *ngIf="quizResult.resultPercentage===100">star_rate</i>
                            <span *ngIf="quizResult.resultPercentage!==100">{{ quizResult.resultPercentage }}%</span>
                        </div>
                        <div class="col-md-1">
                            <i class="material-icons right">keyboard_arrow_right</i>
                        </div>
                        <span class="clearfix"></span>
                    </div>
                    <pagination-controls (pageChange)="page = $event" id="1"
                                         maxSize="20"
                                         directionLinks="true"
                                         autoHide="true">
                    </pagination-controls>
                </div>
            </div>

        </div>
    </div>
</div>
