<form [formGroup]="form" novalidate (ngSubmit)="saveUser(form.value, form.valid)" *ngIf="model">
    <input type="hidden" formControlName="id">

    <div class="modal-body">
        <div class="col-md-8 col-md-offset-2">

            <div class="input-field">
                <label [class.active]="form.controls.email.value.length>0">Email</label>
                <input type="email" formControlName="email" id="email">
                <small class="active-warning" [class.hidden]="form.controls.email.valid || !submitted">
                    Please enter a valid email address.
                </small>
            </div>

            <div class="input-field">
                <label [class.active]="form.controls.firstName.value.length>0">First Name</label>
                <input type="text" formControlName="firstName" id="firstName">
                <small class="active-warning" [class.hidden]="form.controls.firstName.valid || !submitted">
                    First name is required.
                </small>
            </div>

            <div class="input-field">
                <label [class.active]="form.controls.lastName.value.length>0">Last Name</label>
                <input type="text" formControlName="lastName" id="lastName">
                <small class="active-warning" [class.hidden]="form.controls.lastName.valid || !submitted">
                    Last name is required.
                </small>
            </div>

            <label>Role</label>
            <select id="role" formControlName="secGroup" materialize="material_select" [(ngModel)]="model.secGroup" class="browser-default">
                <option *ngFor="let r of roles" [ngValue]="r">{{r.name}}</option>
            </select>
            <small class="active-warning" [class.hidden]="form.controls.secGroup.valid || !submitted">
                Role is required.
            </small>

            <div class="input-field">
                <label [class.active]="form.controls.dealershipName.value.length>0">Dealership Name</label>
                <input type="text" formControlName="dealershipName" class="autocomplete" list="dealershipNames" id="dealershipName">
                <small class="active-warning" [class.hidden]="form.controls.dealershipName.valid || !submitted">
                    Dealership is required.
                </small>
            </div>

            <div class="input-field">
                <label [class.active]="form.controls.dealershipCode.value.length>0">Dealership Code</label>
                <input type="text" formControlName="dealershipCode" class="autocomplete" list="dealershipCodes" id="dealershipCode">
                <small class="active-warning" [class.hidden]="form.controls.dealershipCode.valid || !submitted">
                    Dealership code is required.
                </small>
            </div>

            <div class="input-field">
                <label [class.active]="form.controls.regionName.value.length>0">Region</label>
                <input type="text" formControlName="regionName" class="autocomplete" list="regions" id="regionName">
                <small class="active-warning" [class.hidden]="form.controls.regionName.valid || !submitted">
                    Region is required.
                </small>
            </div>

            <div class="input-field">
                <label [class.active]="form.controls.zoneName.value.length>0">Zone</label>
                <input type="text" formControlName="zoneName" class="autocomplete" list="zones" id="zoneName">
                <small class="active-warning" [class.hidden]="form.controls.zoneName.valid || !submitted">
                    A zone is required.
                </small>
            </div>

        </div>
        <div class="clearfix"></div>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" id="edit-user__cancel">Close</button>
        <button type="submit" class="btn btn-primary btn-save" [disabled]="loading" id="edit-user__save">Save</button>
    </div>
</form>

<datalist id="dealershipNames">
    <option *ngFor="let x of dealershipNames" value="{{x}}">
</datalist>
<datalist id="dealershipCodes">
    <option *ngFor="let x of dealershipCodes" value="{{x}}">
</datalist>
<datalist id="zones">
    <option *ngFor="let x of zones" value="{{x}}">
</datalist>
<datalist id="regions">
    <option *ngFor="let x of regions" value="{{x}}">
</datalist>